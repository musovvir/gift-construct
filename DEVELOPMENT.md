# Инструкции по локальной разработке

## Настройка прокси для разработки

Приложение поддерживает два варианта прокси для локальной разработки:

### Вариант 1: Встроенный Vite прокси (рекомендуется)
Этот вариант использует встроенный прокси Vite, который более стабилен и быстрее.

```bash
npm run dev
```

Приложение будет доступно на `http://localhost:5173`

### Вариант 2: Внешний прокси-сервер
Этот вариант использует отдельный Express сервер на порту 3001.

```bash
npm run dev:proxy
```

Приложение будет доступно на `http://localhost:5173`, а прокси-сервер на `http://localhost:3001`

## Переключение между вариантами прокси

Если вы хотите принудительно использовать внешний прокси-сервер, создайте файл `.env` в корне проекта:

```bash
echo "VITE_USE_EXTERNAL_PROXY=true" > .env
```

Или установите переменную окружения:

```bash
VITE_USE_EXTERNAL_PROXY=true npm run dev
```

**Важно**: В Vite переменные окружения должны начинаться с `VITE_` для доступа в браузере.

## Структура прокси

- **API запросы**: `/api/*` → `https://api.changes.tg/*`
- **CDN запросы**: `/cdn/*` → `https://cdn.changes.tg/*`

## Устранение проблем

1. **CORS ошибки**: Убедитесь, что используете правильный вариант прокси
2. **Порт занят**: Проверьте, что порты 3001 и 5173 свободны
3. **Сетевые ошибки**: Проверьте подключение к интернету и доступность API

## Команды

- `npm run dev` - запуск с встроенным прокси
- `npm run dev:proxy` - запуск с внешним прокси
- `npm run build` - сборка для production
- `npm run preview` - предварительный просмотр production сборки
